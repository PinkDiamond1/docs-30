<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width">

    <title>Cryptographic Keys - XAG Ledger Dev Portal</title>

    <!-- favicon -->
    <link rel="apple-touch-icon" sizes="180x180" href="assets/favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="16x16" href="assets/favicons/favicon-16x16.png">
    <link rel="icon" type="image/png" sizes="32x32" href="assets/favicons/favicon-32x32.png">
    <link rel="manifest" href="assets/favicons/site.webmanifest">
    <link rel="shortcut icon" href="favicon.ico">
    <meta name="msapplication-TileColor" content="#25A768">
    <meta name="msapplication-config" content="assets/favicons/browserconfig.xml">
    <meta name="theme-color" content="#25A768">

    <!-- jQuery -->
    <script src="assets/vendor/jquery-1.11.1.min.js"></script>

    <!-- Stylesheet -->
    <link href="assets/css/devportal.css" rel="stylesheet" />

    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-45576805-2"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-45576805-2');
      gtag('config', 'UA-157720658-3', { 'linker': {
        'domains': ['blog.xpring.io', 'forum.xpring.io', 'xpring.io',
                    'XAGl.org', 'explorer.XAGl.org', 'testnet.XAGl.org']
        } }
      );
    </script>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />


    <!-- syntax highlighting -->
    <link rel="stylesheet" href="assets/vendor/docco.min.css" />
    <script src="assets/vendor/highlight.min.js"></script>

    <!-- expandable code samples -->
    <script src="assets/js/expandcode.js"></script>
    <!-- multi-code selection tabs -->
    <script src="assets/js/multicodetab.js"></script>
    <script>
        $(document).ready(function() {
            $(".multicode").minitabs();
            hljs.initHighlighting();
            make_code_expandable();
        });
    </script>



</head>

<body class="XAG-ledger-dev-portal sidebar-primary lang-en ">

  <nav class="navbar fixed-top navbar-expand-lg navbar-light bg-white">
    <a href="index.html" class="navbar-brand"><img src="assets/img/logo.png" class="logo"  height="44" alt="XAG Ledger Dev Portal" /></a>
    <button class="navbar-toggler" type="button" data-toggle="slide-collapse" data-target="#navbarHolder" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse justify-content-end" id="navbarHolder">
      
<ul class="nav navbar-nav">
  <li class="nav-item">
    <a class="nav-link" href="dev-tools.html">Dev Tools</a>
  </li>
  
<li class="nav-item">
  <a class="nav-link" href="http://xagfans.com/" target="blank">BBS</a>
</li>
</ul><!-- /.navbar-nav -->

      <div class="nav navbar-nav language-selector">
        <div class="dropdown">
          <button class="btn btn-outline-secondary dropdown-toggle" type="button" id="language_selector_header_btn" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            English
          </button>
          <div class="dropdown-menu" aria-labelledby="language_selector_header_btn">
            <a class="dropdown-item" href="/cryptographic-keys.html">English</a>
            <a class="dropdown-item" href="/ja/cryptographic-keys.html">日本語</a>
          </div><!--/.dropdown-menu-->
        </div><!--/.dropdown-->
      </div><!--/.language-selector-->
    </div><!--/#navbarHolder-->
    <div class="menu-overlay"></div>
  </nav>

  <div class="container-fluid" role="document" id="main_content_wrapper">
    <div class="row">
      <!-- Right sidebar first so it's at the beginning for mobile layouts -->
    

      <!-- main column -->
      <main class="main col-md-7 col-lg-6 order-md-3  " role="main" id="main_content_body">
<nav class="breadcrumbs-wrap p-0 p-md-3" aria-label="breadcrumb">
  <ul class="breadcrumb bg-white">
    <li class="breadcrumb-item"><a href="index.html">Home</a></li>
    <li class="active breadcrumb-item"><a href="docs.html">Docs</a></li>
    <li class="active breadcrumb-item"><a href="concepts.html">Concepts</a></li>
    <li class="active breadcrumb-item"><a href="payment-system-basics.html">Payment System Basics</a></li>
    <li class="active breadcrumb-item"><a href="accounts.html">Accounts</a></li>
    <li class="active breadcrumb-item">Cryptographic Keys</li>
  </ul>
</nav><!--/.breadcrumbs-wrap-->  <article class="pt-3 p-md-3">
    <div class="content">
        <h1 id="cryptographic-keys">Cryptographic Keys</h1>
<p>In the XAG Ledger, a digital signature proves that a <a href="transaction-basics.html">transaction</a> is authorized to do a specific set of actions. Only signed transactions can be submitted to the network and included in a validated ledger. <!-- STYLE_OVERRIDE: is authorized to --></p>
<p>Every digital signature is based on a cryptographic key pair associated with the transaction's sending account. A key pair may be generated using any of the XAG Ledger's supported <a href="#signing-algorithms">cryptographic signing algorithms</a>. A key pair can be used as a <a href="#master-key-pair">master key pair</a>, <a href="#regular-key-pair">regular key pair</a> or a member of a <a href="multi-signing.html">signer list</a>, regardless of what algorithm was used to generate it.</p>
<p class="devportal-callout warning"><strong>Warning:</strong> It is important to maintain proper security over your secret keys. Digital signatures are the only way of verifying to the XAG Ledger that you are authorized to send a transaction, and there is no privileged administrator who can undo or reverse any transaction that has been applied to the ledger. If someone else knows the secret key of your XAG Ledger account, that person can create digital signatures to authorize any transaction the same as you could.</p>
<h2 id="generating-keys">Generating Keys</h2>
<p>You generate a key pair using the <a href="wallet_propose.html"><code>wallet_propose</code></a> method. Here's a sample <code>wallet_propose</code> response:</p>
<pre><code>{
  "result": {
    "account_id": "rDGnaDqJczDAjrKHKdhGRJh2G7zJfZhj5q",
    "key_type": "secp256k1",
    "master_key": "COON WARN AWE LUCK TILE WIRE ELI SNUG TO COVE SHAM NAT",
    "master_seed": "sstV9YX8k7yTRzxkRFAHmX7EVqMfX",
    "master_seed_hex": "559EDD35041D3C11F9BBCED912F4DE6A",
    "public_key": "aBQXEw1vZD3guCX3rHL8qy8ooDomdFuxZcWrbRZKZjdDkUoUjGVS",
    "public_key_hex": "0351BDFB30E7924993C625687AE6127034C4A5EBA78A01E9C58B0C46E04E3A4948"
  },
  "status": "success",
  "type": "response"
}
</code></pre>
<p>The response contains a key pair (a seed and a public key, in various formats) as well as an <code>account_id</code>.</p>
<p><strong>Seed</strong></p>
<p>A <em>seed</em> value is a compact value that is used to <a href="#key-derivation">derive</a> the actual secret key (and public key) for an account. The <code>master_key</code>, <code>master_seed</code>, and <code>master_seed_hex</code> all represent the same seed value, in various formats. Any of these formats can be used to <a href="transaction-basics.html#signing-and-submitting-transactions">sign transactions</a> in the <a href="rippled-api.html"><code>rippled</code> APIs</a> and some <a href="software-ecosystem.html">other XAGL software</a>. Despite being prefixed with <code>master_</code>, the keys this seed represents are not necessarily the master keys for an account; you can use a key pair as a regular key or a member of a multi-signing list as well.</p>
<p>Because the seed value is the basis for all the other information of an account, you must protect it very carefully. Anyone who has knows an address's seed value effectively has full control over that address.</p>
<p><strong>Secret Key</strong></p>
<p>The <code>wallet_propose</code> response does not explicitly list the secret key value, also called a <em>private key</em>. Software that can sign transactions is expected to <a href="#key-derivation">derive the secret key</a> from the seed value.</p>
<p><strong>Public Key</strong></p>
<p>The <code>public_key</code> and <code>public_key_hex</code> both represent the same public key value. The public key is derived from the secret key as part of key derivation. The public key makes it possible to verify the authenticity of a transaction signature, but not to create more signatures.</p>
<p><strong>account_id</strong></p>
<p>The <code>account_id</code> is <a href="accounts.html#address-encoding">derived from the public key</a> and designates the <em>potential</em> for an account to be created in the XAG Ledger. It is important to know that while an <code>account_id</code> exists, no actual account exists in the XAG Ledger until the <code>account_id</code> receives its first XAG payment. In addition, the <code>account_id</code> can't send any transactions until after it's received a transaction that funds and creates the account.</p>
<p>The <code>account_id</code> (without a funded account) can, however, be used as a <a href="#regular-key-pair">regular key</a> or a <a href="multi-signing.html">member of a signer list</a> to authorize transactions for another account that does exist.</p>
<p>To create a funded account stored in the ledger, the <code>account_id</code> must <a href="payment.html#creating-accounts">receive a <code>Payment</code> transaction</a> that provides enough XAG to meet the <a href="reserves.html">reserve requirement</a>.</p>
<p>For more information about the <code>wallet_propose</code> response, see <a href="wallet_propose.html"><code>wallet_propose</code></a>.</p>
<p>You can use this generated key pair in one of three ways: as a <a href="#master-key-pair">master key pair</a>, <a href="#regular-key-pair">regular key pair</a>, or <a href="multi-signing.html">signer list member</a>.</p>
<p><strong>Key Type</strong></p>
<p>The field <code>key_type</code> indicates what <a href="#signing-algorithms">cryptographic signing algorithm</a> was used to generate this key pair. You can specify the <code>key_type</code> when you make the request to generate a key pair using the <a href="wallet_propose.html">wallet_propose method</a>.</p>
<h2 id="master-key-pair">Master Key Pair</h2>
<p>The master key pair is composed of a secret key and a public key. In addition to being able to sign all transactions that a regular key pair can, the master key pair's secret key is the only key that can be used to perform the following actions:</p>
<ul>
<li>
<p><a href="accountset.html">Disable the master public key</a>.</p>
</li>
<li>
<p>Permanently give up the ability to <a href="freezes.html#no-freeze">freeze</a>.</p>
</li>
<li>
<p>Send a cost-0 <a href="transaction-cost.html#key-reset-transaction">key reset transaction</a>.</p>
</li>
</ul>
<p>The master key pair for an account is generated in the same <a href="wallet_propose.html"><code>wallet_propose</code></a> response as the <code>account_id</code> of the account the master key pair is authorized to sign transactions for. Because the master key pair is generated in the same response, it is <a href="accounts.html#address-encoding">intrinsically related</a> to the address, which is derived from the public key.</p>
<p>This is as opposed to a regular key pair, which is also generated using the <code>wallet_propose</code> method, but which must be explicitly assigned as a regular key pair to an account. Because a regular key pair is explicitly assigned, it is not intrinsically related to the address of the account it is authorized to sign transactions for. For more information, see <a href="#regular-key-pair">Regular Key Pair</a>.</p>
<p class="devportal-callout caution"><strong>Caution:</strong> A master key pair cannot be changed, but it can be disabled. This means that if your master seed or secret key is compromised, rather than change it, you must <a href="accountset.html">disable it</a>.</p>
<p>Because a master key pair cannot be changed and can only be disabled in the event of a compromise, this is a compelling reason to <a href="offline-account-setup.html">keep your master key pair offline</a> and set up a regular key pair to sign transactions from your account instead.</p>
<p>Keeping your master key pair offline means not putting your master secret key anywhere that malicious actors can get access to it. For example, this can mean keeping it on an air-gapped machine that never connects to the internet, on a piece of paper stored in a safe, or in general, not within reach of a computer program that interacts with the internet at large. Ideally, a master key pair is used only on the most trusted of devices and for emergencies only, such as to change a regular key pair in the event of a possible or actual compromise.</p>
<h2 id="regular-key-pair">Regular Key Pair</h2>
<p>The XAG Ledger allows an account to authorize a secondary key pair, called a <em>regular key pair</em>, to sign future transactions, while keeping your master key pair offline. If the seed or secret key of a regular key pair is compromised, you can remove or replace the key pair without changing the rest of your account. This saves the trouble of re-establishing the account's settings and relationships to other accounts. You can also rotate a regular key pair proactively. (Neither of those things is possible for the master key pair of an account, which is intrinsically linked to the account's address.)</p>
<p>You generate a key pair to use as a regular key pair using the <a href="wallet_propose.html"><code>wallet_propose</code></a> method. However, unlike with a <a href="#master-key-pair">master key pair</a>, which is generated alongside and intrinsically related to the <code>account_id</code> of an account it supports, you must explicitly create the relationship between a regular key pair and the account you want it to sign transactions for. You use the <a href="setregularkey.html"><code>SetRegularKey</code></a> method to assign a regular key pair to an account.</p>
<p>For a tutorial on assigning a regular key pair, see <a href="assign-a-regular-key-pair.html">Assign a Regular Key Pair</a>.</p>
<p>After you assign a regular key pair to an account, the account has two key pairs associated with it:</p>
<ul>
<li>A master key pair that is intrinsically related to the account's <code>account_id</code> and which you should keep offline.</li>
<li>A regular key pair that you've explicitly assigned to the account and which you use to sign transactions for the account.</li>
</ul>
<p>You can assign one regular key pair to an account and use it to sign all transactions, except for the ones reserved for the <a href="#master-key-pair">master key pair</a>.</p>
<p>You can remove or change a regular key pair at any time. This means that if a regular secret key is compromised (but the master secret key is not), you can regain control of your account by simply removing or changing the regular key pair.</p>
<p>For a tutorial on changing or removing a regular key pair, see <a href="assign-a-regular-key-pair.html">Assign a Regular Key Pair</a>.</p>
<h2 id="signing-algorithms">Signing Algorithms</h2>
<p>Cryptographic key pairs are always tied to a specific signing algorithm, which defines the mathematical relationships between the secret key and the public key. Cryptographic signing algorithms have the property that, given the current state of cryptographic techniques, it is "easy" to use a secret key to calculate a matching public key, but it is effectively impossible to compute a matching secret key by starting from a public key.</p>
<p>The XAG Ledger supports the following cryptographic signing algorithms:</p>
<table>
<thead>
<tr>
<th>Key Type</th>
<th>Algorithm</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>secp256k1</code></td>
<td><a class="external-link" href="https://en.wikipedia.org/wiki/Elliptic_Curve_Digital_Signature_Algorithm" target="_blank">ECDSA <i aria-hidden="true" class="fa fa-external-link"></i></a> using the elliptic curve <a class="external-link" href="https://en.bitcoin.it/wiki/Secp256k1" target="_blank">secp256k1 <i aria-hidden="true" class="fa fa-external-link"></i></a></td>
<td>This is the scheme used in Bitcoin. The XAG Ledger uses these key types by default.</td>
</tr>
<tr>
<td><code>ed25519</code></td>
<td><a class="external-link" href="https://tools.ietf.org/html/rfc8032" target="_blank">EdDSA <i aria-hidden="true" class="fa fa-external-link"></i></a> using the elliptic curve <a class="external-link" href="https://ed25519.cr.yp.to/" target="_blank">Ed25519 <i aria-hidden="true" class="fa fa-external-link"></i></a></td>
<td>This is a newer algorithm which has better performance and other convenient properties. Since Ed25519 public keys are one byte shorter than secp256k1 keys, <code>rippled</code> prefixes Ed25519 public keys with the byte <code>0xED</code> so both types of public key are 33 bytes.</td>
</tr>
</tbody>
</table>
<p>When you generate a key pair with the <a href="wallet_propose.html">wallet_propose method</a>, you can specify the <code>key_type</code> to choose which cryptographic signing algorithm to use to derive the keys. If you generated a key type other than the default, you must also specify the <code>key_type</code> when signing transactions.</p>
<p>The supported types of key pairs can be used interchangeably throughout the XAG Ledger as master key pairs, regular key pairs, and members of signer lists. The process of <a href="accounts.html#address-encoding">deriving an address</a> is the same for secp256k1 and Ed25519 key pairs.</p>
<p class="devportal-callout note"><strong>Note:</strong> Currently, you cannot sign <a href="use-payment-channels.html">payment channel claims</a> with Ed25519 keys. This is a bug.</p>
<h3 id="future-algorithms">Future Algorithms</h3>
<p>In the future, it is likely that the XAG Ledger will need new cryptographic signing algorithms to keep up with developments in cryptography. For example, if quantum computers using <a class="external-link" href="https://en.wikipedia.org/wiki/Shor's_algorithm" target="_blank">Shor's algorithm <i aria-hidden="true" class="fa fa-external-link"></i></a> (or something similar) will soon be practical enough to break elliptic curve cryptography, XAG Ledger developers can add a cryptographic signing algorithm that isn't easily broken. As of early 2020, there's no clear first choice "quantum-resistant" signing algorithm and quantum computers are not yet practical enough to be a threat, so there are no immediate plans to add any specific algorithms. <!-- STYLE_OVERRIDE: will --></p>
<h2 id="key-derivation">Key Derivation</h2>
<p>The process of deriving a key pair depends on the signing algorithm. In all cases, keys are generated from a <em>seed</em> value that is 16 bytes (128 bits) in length. The seed value can be completely random (recommended) or it can be derived from a specific passphrase by taking the <a href="basic-data-types.html#hashes">SHA-512 hash</a> and keeping the first 16 bytes (similar to <a href="basic-data-types.html#hashes">SHA-512Half</a>, but keeping only 128 bits instead of 256 bits of the output).</p>
<h3 id="sample-code">Sample Code</h3>
<p>The key derivation processes described here are implemented in multiple places and programming languages:</p>
<ul>
<li>In C++ in the <code>rippled</code> code base:<ul>
<li><a class="external-link" href="https://github.com/ripple/rippled/blob/develop/src/ripple/protocol/Seed.h" target="_blank">Seed definition <i aria-hidden="true" class="fa fa-external-link"></i></a></li>
<li><a class="external-link" href="https://github.com/ripple/rippled/blob/develop/src/ripple/protocol/impl/SecretKey.cpp" target="_blank">General &amp; Ed25519 key derivation <i aria-hidden="true" class="fa fa-external-link"></i></a></li>
<li><a class="external-link" href="https://github.com/ripple/rippled/blob/develop/src/ripple/crypto/impl/GenerateDeterministicKey.cpp" target="_blank">secp256k1 key derivation <i aria-hidden="true" class="fa fa-external-link"></i></a></li>
</ul>
</li>
<li>In Python 3 in <a class="external-link" href="https://github.com/ripple/XAGl-dev-portal/blob/master/content/_code-samples/key-derivation/key_derivation.py" target="_blank">this repository's code samples section <i aria-hidden="true" class="fa fa-external-link"></i></a>.</li>
<li>In JavaScript in the <a class="external-link" href="https://github.com/ripple/ripple-keypairs/" target="_blank"><code>ripple-keypairs</code> <i aria-hidden="true" class="fa fa-external-link"></i></a> package.</li>
</ul>
<h3 id="ed25519-key-derivation">Ed25519 Key Derivation</h3>
<p><a class="external-link" href="https://github.com/ripple/rippled/blob/fc7ecd672a3b9748bfea52ce65996e324553c05f/src/ripple/protocol/impl/SecretKey.cpp#L203" target="_blank" title="Source">[Source] <i aria-hidden="true" class="fa fa-external-link"></i></a></p>
<p><a href="img/key-derivation-ed25519.png"><img alt="Passphrase → Seed → Secret Key → Prefix + Public Key" src="img/key-derivation-ed25519.png"/></a></p>
<ol>
<li>
<p>Calculate the <a href="basic-data-types.html#hashes">SHA-512Half</a> of the seed value. The result is the 32-byte secret key.</p>
<p class="devportal-callout tip"><strong>Tip:</strong> All 32-byte numbers are valid Ed25519 secret keys. However, only numbers that are chosen randomly enough are secure enough to be used as secret keys.</p>
</li>
<li>
<p>To calculate an Ed25519 public key, use the standard public key derivation for <a class="external-link" href="https://ed25519.cr.yp.to/software.html" target="_blank">Ed25519 <i aria-hidden="true" class="fa fa-external-link"></i></a> to derive the 32-byte public key.</p>
<p class="devportal-callout caution"><strong>Caution:</strong> As always with cryptographic algorithms, use a standard, well-known, publicly-audited implementation whenever possible. For example, <a class="external-link" href="https://www.openssl.org/" target="_blank">OpenSSL <i aria-hidden="true" class="fa fa-external-link"></i></a> has implementations of core Ed25519 and secp256k1 functions.</p>
</li>
<li>
<p>Prefix the 32-byte public key with the single byte <code>0xED</code> to indicate an Ed25519 public key, resulting in 33 bytes.</p>
<p>If you are implementing code to sign transactions, remove the <code>0xED</code> prefix and use the 32-byte key for the actual signing process.</p>
</li>
<li>
<p>When serializing an account public key to <a href="base58-encodings.html">base58</a>, use the account public key prefix <code>0x23</code>.</p>
<p>Validator ephemeral keys cannot be Ed25519.</p>
</li>
</ol>
<h3 id="secp256k1-key-derivation">secp256k1 Key Derivation</h3>
<p><a class="external-link" href="https://github.com/ripple/rippled/blob/develop/src/ripple/crypto/impl/GenerateDeterministicKey.cpp" target="_blank" title="Source">[Source] <i aria-hidden="true" class="fa fa-external-link"></i></a></p>
<p><a href="img/key-derivation-secp256k1.png"><img alt="Passphrase → Seed → Root Key Pair → Intermediate Key Pair → Master Key Pair" src="img/key-derivation-secp256k1.png"/></a></p>
<p>Key derivation for secp256k1 XAG Ledger account keys involves more steps than Ed25519 key derivation for a couple reasons:</p>
<ul>
<li>Not all 32-byte numbers are valid secp256k1 secret keys.</li>
<li>The XAG Ledger's reference implementation has an unused, incomplete framework for deriving a family of key pairs from a single seed value.</li>
</ul>
<p>The steps to derive the XAG Ledger's secp256k1 account key pair from a seed value are as follows:</p>
<ol>
<li>
<p>Calculate a "root key pair" from the seed value, as follows:</p>
<ol>
<li>
<p>Concatenate the following in order, for a total of 20 bytes:</p>
<ul>
<li>The seed value (16 bytes)</li>
<li>A "root sequence" value (4 bytes), as a big-endian unsigned integer. Use 0 as a starting value for the root sequence.</li>
</ul>
</li>
<li>
<p>Calculate the <a href="basic-data-types.html#hashes">SHA-512Half</a> of the concatenated (seed+root sequence) value.</p>
</li>
<li>
<p>If the result is not a valid secp265k1 secret key, increment the root sequence by 1 and start over. <a class="external-link" href="https://github.com/ripple/rippled/blob/fc7ecd672a3b9748bfea52ce65996e324553c05f/src/ripple/crypto/impl/GenerateDeterministicKey.cpp#L103" target="_blank" title="Source">[Source] <i aria-hidden="true" class="fa fa-external-link"></i></a></p>
<p>A valid secp256k1 key must not be zero, and it must be numerically less than the <em>secp256k1 group order</em>. The secp256k1 group order is the constant value <code>0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141</code>.</p>
</li>
<li>
<p>With a valid secp256k1 secret key, use the standard ECDSA public key derivation with the secp256k1 curve to derive the root public key. (As always with cryptographic algorithms, use a standard, well-known, publicly-audited implementation whenever possible. For example, <a class="external-link" href="https://www.openssl.org/" target="_blank">OpenSSL <i aria-hidden="true" class="fa fa-external-link"></i></a> has implementations of core Ed25519 and secp256k1 functions.)</p>
</li>
</ol>
<p class="devportal-callout tip"><strong>Tip:</strong> Validators use this root key pair. If you are calculating a validator's key pair, you can stop here. To distinguish between these two different types of public keys, the <a href="base58-encodings.html">base58</a> serialization for validator public keys uses the prefix <code>0x1c</code>.</p>
</li>
<li>
<p>Convert the root public key to its 33-byte compressed form.</p>
<p>The uncompressed form of any ECDSA public key consists of a pair of 32-byte integers: an X coordinate, and a Y coordinate. The compressed form is just the X coordinate and a one-byte prefix: <code>0x02</code> if the Y coordinate is even, or <code>0x03</code> if the Y coordinate is odd.</p>
<p>You can convert an uncompressed public key to the compressed form with the <code>openssl</code> commandline tool. For example, if the uncompressed public key is in the file <code>ec-pub.pem</code>, you can output the compressed form like this:</p>
<pre><code>$ openssl ec -in ec-pub.pem -pubin -text -noout -conv_form compressed
</code></pre>
</li>
<li>
<p>Derive an "intermediate key pair" from the compressed root public key you, as follows:</p>
<ol>
<li>
<p>Concatenate the following in order, for a total of 41 bytes:</p>
<ul>
<li>The compressed root public key (33 bytes)</li>
<li><code>0x00000000000000000000000000000000</code> (4 bytes of zeroes). (This value was intended to be used to derive different members of the same family, but in practice only the value 0 is used.)</li>
<li>A "key sequence" value (4 bytes), as a big-endian unsigned integer. Use 0 as a starting value for the key sequence.</li>
</ul>
</li>
<li>
<p>Calculate the <a href="basic-data-types.html#hashes">SHA-512Half</a> of the concatenated value.</p>
</li>
<li>
<p>If the result is not a valid secp265k1 secret key, increment the key sequence by 1 and restart deriving the account's intermediate key pair.</p>
</li>
<li>
<p>With a valid secp256k1 secret key, use the standard ECDSA public key derivation with the secp256k1 curve to derive the intermediate public key. (As always with cryptographic algorithms, use a standard, well-known, publicly-audited implementation whenever possible. For example, <a class="external-link" href="https://www.openssl.org/" target="_blank">OpenSSL <i aria-hidden="true" class="fa fa-external-link"></i></a> has implementations of core Ed25519 and secp256k1 functions.)</p>
</li>
</ol>
</li>
<li>
<p>Derive the master public key pair by adding the intermediate public key to the root public key. Similarly, derive the secret key by adding the intermediate secret key to the root secret key.</p>
<ul>
<li>
<p>An ECDSA secret key is just a very large integer, so you can calculate the sum of two secret keys by summing them modulo the secp256k1 group order.</p>
</li>
<li>
<p>An ECDSA public key is a point on the elliptic curve, so you should use elliptic curve math to sum the points.</p>
</li>
</ul>
</li>
<li>
<p>Convert the master public key to its 33-byte compressed form, as before.</p>
</li>
<li>
<p>When serializing an account's public key to its <a href="base58-encodings.html">base58</a> format, use the account public key prefix, <code>0x23</code>.</p>
<p>See <a href="accounts.html#address-encoding">Address Encoding</a> for information and sample code to convert from an account's public key to its address.</p>
</li>
</ol>

<!-- -->
<!-- -->
<!-- API object types -->
<!-- -->
<!-- -->
<!-- -->
<!-- rippled release notes links -->
    </div>
  </article>
      </main>
      <!-- Left sidebar last so it's at the end for mobile -->
      <aside class="sidebar col-md-5 col-lg-3 p-0 order-md-1" role="complementary">
<div class="tree_nav">

  <!---->
    <div class="sidenav_parent">
      <a href="concepts.html"> Concepts</a>
    </div>

  <!---->

    <!---->
    <div id="sidenav" role="tablist" aria-multiselectable="true">
        <!---->
          <div class="card">
            <div class="card-header" role="tab" id="sidenav_cat_head_2">
                <a class="collapsed sidenav_cat_toggler" role="button" data-toggle="collapse" href="#sidenav_collapse_2" aria-expanded="true" aria-controls="sidenav_collapse_2"></a>
              <h5 class="card-title">
                  <a class="sidenav_cat_title" href="introduction.html">Introduction</a>
                <!-- <a class="sidenav_cat_title" href="introduction.html">Introduction</a> -->
              </h5>
            </div><!-- /.card-header -->

            <div id="sidenav_collapse_2" class="collapse" role="tabpanel" aria-labelledby="sidenav_cat_head_2">
              <div class="card-body">
                <ul class="sidebar_pagelist">
                      <li><a class="nosubcat-page" href="XAG-ledger-overview.html">XAG Ledger Overview</a></li>
                      <li><a class="nosubcat-page" href="intro-to-consensus.html">Introduction to Consensus</a></li>
                      <li><a class="nosubcat-page" href="XAG.html">XAG</a></li>
                      <li><a class="nosubcat-page" href="software-ecosystem.html">Software Ecosystem</a></li>
                      <li><a class="nosubcat-page" href="technical-faq.html">Technical FAQ</a></li>

                </ul>
              </div><!-- /.card-body -->
            </div><!-- /#sidenav_collapse2 -->

          </div><!-- /.card -->

        <!---->
          <div class="card active">
            <div class="card-header" role="tab" id="sidenav_cat_head_8">
                <a class="sidenav_cat_toggler" role="button" data-toggle="collapse" href="#sidenav_collapse_8" aria-expanded="true" aria-controls="sidenav_collapse_8"></a>
              <h5 class="card-title">
                  <a class="sidenav_cat_title active-parent" href="payment-system-basics.html">Payment System Basics</a>
                <!-- <a class="sidenav_cat_title" href="payment-system-basics.html">Payment System Basics</a> -->
              </h5>
            </div><!-- /.card-header -->

            <div id="sidenav_collapse_8" class="collapse show" role="tabpanel" aria-labelledby="sidenav_cat_head_8">
              <div class="card-body">
                <ul class="sidebar_pagelist">
                      <li><a class="subcat-title active-parent" href="accounts.html">Accounts</a></li>

                          <li><a class="active subpage" href="#main_content_body">Cryptographic Keys</a></li>
                          <li><a class="subpage" href="multi-signing.html">Multi-Signing</a></li>
        
                      <li><a class="nosubcat-page" href="ledgers.html">Ledgers</a></li>
                      <li><a class="subcat-title" href="transaction-basics.html">Transaction Basics</a></li>

                          <li><a class="subpage" href="transaction-cost.html">Transaction Cost</a></li>
                          <li><a class="subpage" href="finality-of-results.html">Finality of Results</a></li>
                          <li><a class="subpage" href="source-and-destination-tags.html">Source and Destination Tags</a></li>


                </ul>
              </div><!-- /.card-body -->
            </div><!-- /#sidenav_collapse8 -->

          </div><!-- /.card -->

        <!---->
      

        <!---->
          <div class="card">
            <div class="card-header" role="tab" id="sidenav_cat_head_28">
                <a class="collapsed sidenav_cat_toggler" role="button" data-toggle="collapse" href="#sidenav_collapse_28" aria-expanded="true" aria-controls="sidenav_collapse_28"></a>
              <h5 class="card-title">
                  <a class="sidenav_cat_title" href="issued-currencies.html">Issued Currencies</a>
                <!-- <a class="sidenav_cat_title" href="issued-currencies.html">Issued Currencies</a> -->
              </h5>
            </div><!-- /.card-header -->

            <div id="sidenav_collapse_28" class="collapse" role="tabpanel" aria-labelledby="sidenav_cat_head_28">
              <div class="card-body">
                <ul class="sidebar_pagelist">
                      <li><a class="nosubcat-page" href="issued-currencies-overview.html">Issued Currencies Overview</a></li>
                      <li><a class="nosubcat-page" href="trust-lines-and-issuing.html">Trust Lines and Issuing</a></li>
                      <li><a class="nosubcat-page" href="authorized-trust-lines.html">Authorized Trust Lines</a></li>
                      <li><a class="nosubcat-page" href="freezes.html">Freezing Issued Currencies</a></li>
                      <li><a class="nosubcat-page" href="rippling.html">Rippling</a></li>
                      <li><a class="nosubcat-page" href="transfer-fees.html">Transfer Fees</a></li>
                      <li><a class="nosubcat-page" href="issuing-and-operational-addresses.html">Issuing and Operational Addresses</a></li>
                      <li><a class="nosubcat-page" href="paths.html">Paths</a></li>
                      <li><a class="nosubcat-page" href="demurrage.html">Demurrage</a></li>

                </ul>
              </div><!-- /.card-body -->
            </div><!-- /#sidenav_collapse28 -->

          </div><!-- /.card -->

        <!---->
          <div class="card">
            <div class="card-header" role="tab" id="sidenav_cat_head_38">
                <a class="collapsed sidenav_cat_toggler" role="button" data-toggle="collapse" href="#sidenav_collapse_38" aria-expanded="true" aria-controls="sidenav_collapse_38"></a>
              <h5 class="card-title">
                  <a class="sidenav_cat_title" href="decentralized-exchange.html">Decentralized Exchange</a>
                <!-- <a class="sidenav_cat_title" href="decentralized-exchange.html">Decentralized Exchange</a> -->
              </h5>
            </div><!-- /.card-header -->

            <div id="sidenav_collapse_38" class="collapse" role="tabpanel" aria-labelledby="sidenav_cat_head_38">
              <div class="card-body">
                <ul class="sidebar_pagelist">
                      <li><a class="nosubcat-page" href="offers.html">Offers</a></li>
                      <li><a class="nosubcat-page" href="autobridging.html">Auto-Bridging</a></li>
                      <li><a class="nosubcat-page" href="ticksize.html">Tick Size</a></li>

                </ul>
              </div><!-- /.card-body -->
            </div><!-- /#sidenav_collapse38 -->

          </div><!-- /.card -->

        <!---->
        

        <!---->
        

    </div><!-- /#sidenav -->
</div><!-- /.tree_nav -->      </aside>
    </div><!--/.row (main layout)-->
  </div>

<!-- Jump to top button -->
<a href="#main_content_wrapper" class="jump-to-top btn btn-primary btn-lg" role="button" title="Jump to top of page">Top</a>
<script type="text/javascript" src="assets/js/jump-to-top.js"></script>

<!-- Non-blocking resources -->
<!-- Bootstrap JS -->
<script src="assets/vendor/bootstrap.min.js"></script>
<!-- fontawesome icons -->
<link rel="stylesheet" href="assets/vendor/fontawesome/css/font-awesome.min.css" />

<!-- Algolia DocSearch -->
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
<script type="text/javascript"> docsearch({
apiKey: '70de5b9b8ef95460f3c6e04054b325b2',
indexName: 'XAGl',
inputSelector: '#topsearchbar',
algoliaOptions: { 'facetFilters': ["lang:en"] },
debug: false
});
</script>

<script type="application/javascript">
  gtag('set', {'content_group1': 'Content Docs'});
</script>
</body>
</html>